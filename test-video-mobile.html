<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Video M√≥vil</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        video {
            width: 100%;
            max-width: 500px;
            background: #000;
        }
        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .info { background: #e3f2fd; border-left: 4px solid #2196f3; }
        .success { background: #e8f5e8; border-left: 4px solid #4caf50; }
        .error { background: #ffebee; border-left: 4px solid #f44336; }
    </style>
</head>
<body>
    <h1>üß™ Test Diagn√≥stico de Videos M√≥viles</h1>
    
    <div class="test-container">
        <h2>üì± Informaci√≥n del Dispositivo</h2>
        <div id="deviceInfo" class="status info">Detectando...</div>
    </div>

    <div class="test-container">
        <h2>üé¨ Test Video con Todos los Atributos</h2>
        <video id="testVideo" 
               controls 
               preload="metadata"
               playsinline
               webkit-playsinline
               muted
               poster="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAwIiBoZWlnaHQ9IjI4MCIgdmlld0JveD0iMCAwIDUwMCAyODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1MDAiIGhlaWdodD0iMjgwIiBmaWxsPSIjRjhGQUZDIi8+CjxwYXRoIGQ9Ik0yMDAgMTEyTDMyMCAxNDBMMjAwIDE2OFYxMTJaIiBmaWxsPSIjM0I4MkY2Ii8+Cjx0ZXh0IHg9IjI1MCIgeT0iMTYwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9IiM2NDc0OEIiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlRlc3QgVmlkZW88L3RleHQ+Cjwvc3ZnPgo=">
            <source src="assets/videos/Caja/apertura-caja/2025-09-04 16-27-28 (Copy).mp4" type="video/mp4">
            Tu navegador no soporta videos HTML5.
        </video>
        <div id="videoStatus" class="status info">Estado del video...</div>
    </div>

    <div class="test-container">
        <h2>üîó Test de URLs</h2>
        <div id="urlTests" class="status info">Probando URLs...</div>
    </div>

    <script>
        // Informaci√≥n del dispositivo
        function detectDevice() {
            const userAgent = navigator.userAgent;
            const isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);
            const isIOS = /iPad|iPhone|iPod/.test(userAgent);
            const isAndroid = /Android/i.test(userAgent);
            const isSafari = /Safari/i.test(userAgent) && !/Chrome/i.test(userAgent);
            
            return {
                isMobile,
                isIOS,
                isAndroid,
                isSafari,
                userAgent,
                screenSize: `${screen.width}x${screen.height}`,
                viewport: `${window.innerWidth}x${window.innerHeight}`
            };
        }

        // Mostrar informaci√≥n del dispositivo
        function showDeviceInfo() {
            const device = detectDevice();
            const deviceInfo = document.getElementById('deviceInfo');
            
            deviceInfo.innerHTML = `
                <strong>üì± Dispositivo:</strong> ${device.isMobile ? 'M√≥vil' : 'Desktop'}<br>
                <strong>üçé iOS:</strong> ${device.isIOS ? 'S√≠' : 'No'}<br>
                <strong>ü§ñ Android:</strong> ${device.isAndroid ? 'S√≠' : 'No'}<br>
                <strong>ü¶Å Safari:</strong> ${device.isSafari ? 'S√≠' : 'No'}<br>
                <strong>üìê Pantalla:</strong> ${device.screenSize}<br>
                <strong>üëÄ Viewport:</strong> ${device.viewport}<br>
                <strong>üîç User Agent:</strong> ${device.userAgent}
            `;
        }

        // Test del video
        function testVideo() {
            const video = document.getElementById('testVideo');
            const status = document.getElementById('videoStatus');
            
            video.addEventListener('loadstart', () => {
                status.innerHTML = '‚è≥ Cargando video...';
                status.className = 'status info';
            });
            
            video.addEventListener('loadedmetadata', () => {
                status.innerHTML = '‚úÖ Metadatos cargados correctamente';
                status.className = 'status success';
            });
            
            video.addEventListener('error', (e) => {
                status.innerHTML = `‚ùå Error cargando video: ${e.target.error?.message || 'Error desconocido'}`;
                status.className = 'status error';
            });
            
            video.addEventListener('canplay', () => {
                status.innerHTML = 'üé¨ Video listo para reproducir';
                status.className = 'status success';
            });
        }

        // Test de URLs
        async function testUrls() {
            const urls = [
                'assets/videos/Caja/apertura-caja/2025-09-04 16-27-28 (Copy).mp4',
                'assets/videos/Caja/apertura-caja/2025-09-04%2016-27-28%20(Copy).mp4'
            ];
            
            const urlTests = document.getElementById('urlTests');
            let results = '<strong>üîó Pruebas de URL:</strong><br>';
            
            for (const url of urls) {
                try {
                    const response = await fetch(url, { method: 'HEAD' });
                    results += `‚úÖ ${url} - Status: ${response.status}<br>`;
                } catch (error) {
                    results += `‚ùå ${url} - Error: ${error.message}<br>`;
                }
            }
            
            urlTests.innerHTML = results;
        }

        // Inicializar tests
        document.addEventListener('DOMContentLoaded', () => {
            showDeviceInfo();
            testVideo();
            testUrls();
        });
    </script>
</body>
</html>